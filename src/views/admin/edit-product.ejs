<!DOCTYPE html>
<html lang="en">
  <head>
    <%- include('../includes/head') %>
    <link rel="stylesheet" href="/css/forms.css" />
    <link rel="stylesheet" href="/css/product.css" />
  </head>

  <body>
    <%- include('../includes/header') %>

    <main>
      <form
        class="product-form"
        action="/admin/<% if(editting) { %>edit-product<% } else { %>add-product<% } %>"
        method="POST"
      >
        <div class="form-control">
          <label for="title">Title</label>
          <input
            type="text"
            name="title"
            id="title"
            value="<% if(editting) { %><%= product.title %><% } %>"
          />

          <label for="imageUrl">Image</label>
          <input
            type="url"
            name="imageUrl"
            id="imageUrl"
            value="<% if(editting) { %><%= product.imageUrl %><% } %>"
          />

          <label for="price">Price</label>
          <input
            type="number"
            step="0.01"
            name="price"
            id="price"
            value="<% if(editting) { %><%= product.price %><% } %>"
          />

          <label for="description">Description</label>
          <textarea name="description" id="description">
<% if(editting) { %><%= product.description %><% } %>
          </textarea>

          <% if(editting) { %>
          <input type="hidden" name="id" value="<%= product.id %>" />
          <% } %>
        </div>

        <button class="btn" type="submit">
          <% if(editting) { %>Update<% } else { %>Add Product<% } %>
        </button>
      </form>

      <hr />

      <h1>All Available Products</h1>

      <table>
        <tr>
          <th>Title</th>
          <th>Price</th>
          <th>Description</th>
        </tr>
        <% for(var i=0; i < productData.length; i++) { %>
        <tr>
          <td><%= productData[i].title %></td>
          <td><%= productData[i].price %></td>
          <td><%= productData[i].description %></td>
        </tr>
        <% } %>
      </table>
    </main>
  </body>

  <%- include('../includes/end') %>
</html>
